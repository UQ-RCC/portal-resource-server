[
    [
        "Nimrod"
    ],
    {
        "Nimrod": {
            "loginHost": null,
            "username": null,
           	"messageRegexs": [
                {
                    "pattern": "^INFO:(?P<info>.*(?:\n|\r\n?))"
                },
                {
                    "pattern": "^WARN:(?P<warn>.*(?:\n|\r\n?))"
                },
                {
                    "pattern": "^ERROR:(?P<error>.*(?:\n|\r\n?))"
                }
            ],
            "Commands": {
	           	"getProjects": {
	                "async": false,
	                "cmd": "\"groups | sed 's@ @\\n@g'\"",
	                "failFatal": true,
	                "formatFatal": false,
	                "host": "login",
	                "loop": false,
	                "regex": [
	                    "^\\s*(?P<group>\\S+)\\s*$"
	                ],
	                "requireMatch": true
	            },
	            "getExperiments": {
	                "async": false,
	                "cmd": "JAVA_HOME=/scratch/eait/uqhngu36/nimrod/lib/jvm/jdk-11.0.2 /scratch/eait/uqhngu36/nimrod/opt/nimrod-1.1.4/bin/nimrod portalapi getexperiments | tail -n +2",
	                "failFatal": true,
	                "formatFatal": false,
	                "host": "login",
	                "loop": false,
	                "regex": [
	                    "(?P<name>.*),(?P<workdir>.*),(?P<path>.*),(?P<numberofruns>[0-9]+)"
	               	],
	                "requireMatch": true
	            },
	            "addExperiment": {
	                "async": false,
	                "cmd": "/opt/nimrod/bin/nimrod portalapi addexperiment {expname}",
	                "failFatal": true,
	                "formatFatal": false,
	                "host": "login",
	                "loop": false,
	                "regex": [
	                    null
	                ],
	                "requireMatch": false
	            },
	            "deleteExperiment": {
	                "async": false,
	                "cmd": "/opt/nimrod/bin/nimrod portalapi deleteexperiment {expname}",
	                "failFatal": true,
	                "formatFatal": false,
	                "host": "login",
	                "loop": false,
	                "regex": [
	                    null
	                ],
	                "requireMatch": false
	            },
	            "getRuns": {
	                "async": false,
	                "cmd": "JAVA_HOME=/scratch/eait/uqhngu36/nimrod/lib/jvm/jdk-11.0.2 /scratch/eait/uqhngu36/nimrod/opt/nimrod-1.1.4/bin/nimrod portalapi getruns {expname} | tail -n +2",
	                "failFatal": true,
	                "formatFatal": false,
	                "host": "login",
	                "loop": false,
	                "regex": [
	                    "(?P<name>.*),(?P<state>.*),(?P<workdir>.*),(?P<creation_time>.*),(?P<token>.*),(?P<path>.*)"
	                ],
	                "requireMatch": true
	            },
	            "addRun": {
	                "async": false,
	                "cmd": "echo {planfile} | base64 --decode | /opt/nimrod/bin/nimrod portalapi addrun {expname} {runname}",
	                "failFatal": true,
	                "formatFatal": false,
	                "host": "login",
	                "loop": false,
	                "regex": [
	                    null
	                ],
	                "requireMatch": false
	            },
	            "deleteRun": {
	                "async": false,
	                "cmd": "/opt/nimrod/bin/nimrod portalapi deleterun {expname} {runname}",
	                "failFatal": true,
	                "formatFatal": false,
	                "host": "login",
	                "loop": false,
	                "regex": [
	                    null
	                ],
	                "requireMatch": false
	            },
	            "getResources": {
	                "async": false,
	                "cmd": "JAVA_HOME=/scratch/eait/uqhngu36/nimrod/lib/jvm/jdk-11.0.2 /scratch/eait/uqhngu36/nimrod/opt/nimrod-1.1.4/bin/nimrod portalapi getresources | tail -n +2",
	                "failFatal": true,
	                "formatFatal": false,
	                "host": "login",
	                "loop": false,
	                "regex": [
	                     "(?P<name>.*),(?P<path>.*),(?P<config_json>.*)"
	                ],
	                "requireMatch": true
	            },
	            "addResource": {
	                "async": false,
	                "cmd": "echo {resconfig} | base64 --decode | /opt/nimrod/bin/nimrod portalapi addresource {resname} {restype}",
	                "failFatal": true,
	                "formatFatal": false,
	                "host": "login",
	                "loop": false,
	                "regex": [
	                     null
	                ],
	                "requireMatch": true
	            },
	            "deleteResource": {
	                "async": false,
	                "cmd": "/opt/nimrod/bin/nimrod portalapi deleteresource {resname}",
	                "failFatal": true,
	                "formatFatal": false,
	                "host": "login",
	                "loop": false,
	                "regex": [
	                     null
	                ],
	                "requireMatch": true
	            },
	            "startRun": {
	                "async": false,
	                "cmd": "/opt/nimrod/bin/nimrod portalapi startrun {expname} {runname}",
	                "failFatal": true,
	                "formatFatal": false,
	                "host": "login",
	                "loop": false,
	                "regex": [
	                     null
	                ],
	                "requireMatch": true
	            },
	            "stopRun": {
	                "async": false,
	                "cmd": "/opt/nimrod/bin/nimrod portalapi stoprun {expname} {runname}",
	                "failFatal": true,
	                "formatFatal": false,
	                "host": "login",
	                "loop": false,
	                "regex": [
	                     null
	                ],
	                "requireMatch": true
	            },
	            
	            "initNimrod":{
	                "async": false,
	                "cmd": "/opt/nimrod/bin/nimrod setup init",
	                "failFatal": true,
	                "formatFatal": false,
	                "host": "login",
	                "loop": false,
	                "regex": [
	                    null
	                ],
	                "requireMatch": false
	            },
	            "keepMasterRunning":{
	                "async": false,
	                "cmd": "if pgrep -u `whoami` nimrod > /dev/null 2>&1; then nohup /opt/nimrod/bin/nimrod master &; fi",
	                "failFatal": true,
	                "formatFatal": false,
	                "host": "login",
	                "loop": false,
	                "regex": [
	                    null
	                ],
	                "requireMatch": false
	            }
            }
        }
    }
]
